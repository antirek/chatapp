# ะคัะฝะบัะธั ัะพะทะดะฐะฝะธั ะฝะพะฒะพะณะพ ะดะธะฐะปะพะณะฐ

**ะะฐัะฐ**: 05.11.2025  
**ะะตััะธั**: 1.2.0  
**ะกัะฐััั**: โ ะะะะะะะะะะะ ะ ะะะะขะะกะขะะะะะะะ

---

## ะะฟะธัะฐะฝะธะต

ะะพะฑะฐะฒะปะตะฝะฐ ะฒะพะทะผะพะถะฝะพััั ัะพะทะดะฐะฝะธั ะฝะพะฒัั ะดะธะฐะปะพะณะพะฒ ัะตัะตะท ะผะพะดะฐะปัะฝะพะต ะพะบะฝะพ ั ะฒัะฑะพัะพะผ ะฟะพะปัะทะพะฒะฐัะตะปั ะธะท ัะฟะธัะบะฐ ะฒัะตั ะทะฐัะตะณะธัััะธัะพะฒะฐะฝะฝัั ะฟะพะปัะทะพะฒะฐัะตะปะตะน.

---

## ะะตะฐะปะธะทะพะฒะฐะฝะฝัะต ะบะพะผะฟะพะฝะตะฝัั

### 1. Backend

#### ะะพะฒัะน ัะพัั: `/api/users`

**ะคะฐะนะป**: `backend/src/routes/users.js`

**Endpoints:**

1. **GET /api/users** - ะะพะปััะตะฝะธะต ัะฟะธัะบะฐ ะฟะพะปัะทะพะฒะฐัะตะปะตะน
   - Query ะฟะฐัะฐะผะตััั:
     - `search` - ะฟะพะธัะบ ะฟะพ ะธะผะตะฝะธ ะธะปะธ ัะตะปะตัะพะฝั
     - `limit` - ะบะพะปะธัะตััะฒะพ ะฟะพะปัะทะพะฒะฐัะตะปะตะน (ะฟะพ ัะผะพะปัะฐะฝะธั 50)
   - ะัะบะปััะฐะตั ัะตะบััะตะณะพ ะฟะพะปัะทะพะฒะฐัะตะปั ะธะท ัะฟะธัะบะฐ
   - ะกะพััะธัะพะฒะบะฐ ะฟะพ ะฟะพัะปะตะดะฝะตะน ะฐะบัะธะฒะฝะพััะธ

2. **GET /api/users/:userId** - ะะพะปััะตะฝะธะต ะบะพะฝะบัะตัะฝะพะณะพ ะฟะพะปัะทะพะฒะฐัะตะปั
   - ะะพะทะฒัะฐัะฐะตั ะธะฝัะพัะผะฐัะธั ะพ ะฟะพะปัะทะพะฒะฐัะตะปะต ะฟะพ userId

**ะัะธะผะตั ะพัะฒะตัะฐ:**
```json
{
  "success": true,
  "data": [
    {
      "userId": "usr_abc123",
      "name": "ะะฒะฐะฝ ะะตััะพะฒ",
      "phone": "79123456789",
      "lastActiveAt": "2025-11-05T10:30:00Z"
    }
  ],
  "total": 5
}
```

---

### 2. Frontend

#### ะะพะผะฟะพะฝะตะฝั: `CreateDialogModal.vue`

**ะคัะฝะบัะธะธ:**
- ะะพะดะฐะปัะฝะพะต ะพะบะฝะพ ั ะทะฐัะตะผะฝะตะฝะธะตะผ ัะพะฝะฐ
- ะะพะธัะบ ะฟะพะปัะทะพะฒะฐัะตะปะตะน ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ (debounce 300ms)
- ะกะฟะธัะพะบ ะฟะพะปัะทะพะฒะฐัะตะปะตะน ั ะฐะฒะฐัะฐัะฐะผะธ (ะธะฝะธัะธะฐะปั)
- ะะฝะดะธะบะฐัะพั ะทะฐะณััะทะบะธ
- ะะฝะดะธะบะฐัะพั ัะพะทะดะฐะฝะธั ะดะธะฐะปะพะณะฐ
- Empty state ะดะปั ะฟัััะพะณะพ ัะฟะธัะบะฐ

**ะัะพะฑะตะฝะฝะพััะธ:**
- ะัะฐะดะธะตะฝัะฝัะต ะฐะฒะฐัะฐัั (purple โ pink)
- ะคะพัะผะฐัะธัะพะฒะฐะฝะธะต ัะตะปะตัะพะฝะพะฒ
- ะะฐะบัััะธะต ะฟะพ ะบะปะธะบั ะฝะฐ ัะพะฝ ะธะปะธ ESC
- ะะปะพะบะธัะพะฒะบะฐ ะทะฐะบัััะธั ะฒะพ ะฒัะตะผั ัะพะทะดะฐะฝะธั
- ะะฒัะพะผะฐัะธัะตัะบะฐั ะพัะธััะบะฐ ะฟัะธ ะทะฐะบัััะธะธ

**ะกะพะฑััะธั:**
- `close` - ะทะฐะบัััะธะต ะผะพะดะฐะปัะฝะพะณะพ ะพะบะฝะฐ
- `user-selected` - ะฒัะฑะพั ะฟะพะปัะทะพะฒะฐัะตะปั ะดะปั ัะพะทะดะฐะฝะธั ะดะธะฐะปะพะณะฐ

---

#### ะะฝะพะฟะบะฐ "ะกะพะทะดะฐัั ัะฐั"

**ะะฐัะฟะพะปะพะถะตะฝะธะต**: ะ ะทะฐะณะพะปะพะฒะบะต ัะฐะทะดะตะปะฐ "ะงะฐัั" (ัะฟัะฐะฒะฐ)

**ะะธะทะฐะนะฝ:**
- ะะบะพะฝะบะฐ "+" (plus)
- ะกะธะฝะธะน ัะฒะตั (#3B82F6)
- Hover ัััะตะบั (ัะฒะตัะปะพ-ัะธะฝะธะน ัะพะฝ)
- ะััะณะปะฐั ัะพัะผะฐ ั padding

---

#### ะะพะณะธะบะฐ ัะพะทะดะฐะฝะธั ะดะธะฐะปะพะณะฐ

**ะคะฐะนะป**: `frontend/src/views/ChatView.vue`

**ะัะพัะตัั:**
1. ะะพะปัะทะพะฒะฐัะตะปั ะบะปะธะบะฐะตั "ะกะพะทะดะฐัั ัะฐั"
2. ะัะบััะฒะฐะตััั ะผะพะดะฐะปัะฝะพะต ะพะบะฝะพ ั ัะฟะธัะบะพะผ ะฟะพะปัะทะพะฒะฐัะตะปะตะน
3. ะะพะปัะทะพะฒะฐัะตะปั ะฒัะฑะธัะฐะตั ัะพะฑะตัะตะดะฝะธะบะฐ
4. ะะพะบะฐะทัะฒะฐะตััั ะธะฝะดะธะบะฐัะพั "ะกะพะทะดะฐะฝะธะต ะดะธะฐะปะพะณะฐ..."
5. POST ะทะฐะฟัะพั ะฝะฐ `/api/dialogs`
6. ะะพะดะฐะปัะฝะพะต ะพะบะฝะพ ะทะฐะบััะฒะฐะตััั
7. ะะฑะฝะพะฒะปัะตััั ัะฟะธัะพะบ ะดะธะฐะปะพะณะพะฒ
8. ะะฒัะพะผะฐัะธัะตัะบะธ ะพัะบััะฒะฐะตััั ะฝะพะฒัะน ะดะธะฐะปะพะณ

---

## ะกัััะบัััะฐ ัะฐะนะปะพะฒ

### Backend (2 ัะฐะนะปะฐ):
```
backend/
โโโ src/
โ   โโโ routes/
โ       โโโ users.js              โ ะะพะฒัะน
โโโ server.js                     โ ะะทะผะตะฝะตะฝ
```

### Frontend (3 ัะฐะนะปะฐ):
```
frontend/
โโโ src/
โ   โโโ components/
โ   โ   โโโ CreateDialogModal.vue โ ะะพะฒัะน
โ   โโโ views/
โ   โ   โโโ ChatView.vue          โ ะะทะผะตะฝะตะฝ
โ   โโโ services/
โ       โโโ api.ts                โ ะะทะผะตะฝะตะฝ
```

---

## API ะผะตัะพะดั

### Frontend API Service

**ะคะฐะนะป**: `frontend/src/services/api.ts`

```typescript
// ะะพะปััะธัั ัะฟะธัะพะบ ะฟะพะปัะทะพะฒะฐัะตะปะตะน
async getUsers(params?: {
  search?: string
  limit?: number
}): Promise<ApiResponse>

// ะะพะปััะธัั ะบะพะฝะบัะตัะฝะพะณะพ ะฟะพะปัะทะพะฒะฐัะตะปั
async getUser(userId: string): Promise<ApiResponse>
```

---

## ะขะตััะธัะพะฒะฐะฝะธะต

### ะกัะตะฝะฐัะธะน 1: ะกะพะทะดะฐะฝะธะต ะดะธะฐะปะพะณะฐ
1. โ ะัะบัััั ะฟัะธะปะพะถะตะฝะธะต ะฟะพะด ะะตัะฒัะผ ะะพะปัะทะพะฒะฐัะตะปะตะผ
2. โ ะะปะธะบะฝััั "ะกะพะทะดะฐัั ัะฐั"
3. โ ะะพะดะฐะปัะฝะพะต ะพะบะฝะพ ะพัะบััะฒะฐะตััั
4. โ ะัะพะฑัะฐะถะฐะตััั ัะฟะธัะพะบ ะฟะพะปัะทะพะฒะฐัะตะปะตะน (ะธัะบะปััะฐั ัะตะฑั)
5. โ ะัะฑัะฐัั "ะะฝะฝะฐ ะะฒะฐะฝะพะฒะฐ"
6. โ ะะพะบะฐะทัะฒะฐะตััั "ะกะพะทะดะฐะฝะธะต ะดะธะฐะปะพะณะฐ..."
7. โ ะะธะฐะปะพะณ ัะพะทะดะฐะฝ ะธ ะฟะพัะฒะธะปัั ะฒ ัะฟะธัะบะต
8. โ ะะธะฐะปะพะณ ะฐะฒัะพะผะฐัะธัะตัะบะธ ะพัะบััะปัั

### ะกัะตะฝะฐัะธะน 2: ะะพะธัะบ ะฟะพะปัะทะพะฒะฐัะตะปะตะน
1. โ ะัะบัััั ะผะพะดะฐะปัะฝะพะต ะพะบะฝะพ
2. โ ะะฒะตััะธ "ะะฝะฝะฐ" ะฒ ะฟะพะธัะบ
3. โ ะกะฟะธัะพะบ ัะธะปััััะตััั (ะฟะพะบะฐะทัะฒะฐะตั ัะพะปัะบะพ ะะฝะฝั)
4. โ ะัะธััะธัั ะฟะพะธัะบ
5. โ ะัะต ะฟะพะปัะทะพะฒะฐัะตะปะธ ัะฝะพะฒะฐ ะฒะธะดะฝั

### ะกัะตะฝะฐัะธะน 3: ะะฐะบัััะธะต ะผะพะดะฐะปัะฝะพะณะพ ะพะบะฝะฐ
1. โ ะัะบัััั ะผะพะดะฐะปัะฝะพะต ะพะบะฝะพ
2. โ ะะปะธะบะฝััั ะฝะฐ ะทะฐัะตะผะฝะตะฝะฝัะน ัะพะฝ
3. โ ะะพะดะฐะปัะฝะพะต ะพะบะฝะพ ะทะฐะบััะฒะฐะตััั
4. โ ะะฐะถะฐัั ESC
5. โ ะะพะดะฐะปัะฝะพะต ะพะบะฝะพ ะทะฐะบััะฒะฐะตััั

---

## ะะธะทัะฐะปัะฝัะน ะดะธะทะฐะนะฝ

### ะะฝะพะฟะบะฐ "ะกะพะทะดะฐัั ัะฐั"
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ะงะฐัั                            [+] โ โ ะะฝะพะฟะบะฐ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ [ะกะฟะธัะพะบ ะดะธะฐะปะพะณะพะฒ]                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ะะพะดะฐะปัะฝะพะต ะพะบะฝะพ
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ะกะพะทะดะฐัั ัะฐั                          [ร] โ โ Header
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ [ะะพะธัะบ ะฟะพ ะธะผะตะฝะธ ะธะปะธ ัะตะปะตัะพะฝั...]         โ โ Search
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ โโโโ                                     โ
โ โะะโ ะะฝะฝะฐ ะะฒะฐะฝะพะฒะฐ               โ        โ โ User
โ โโโโ +7 922 222-22-22                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ โโโโ                                     โ
โ โะะโ ะะฒะฐะฝ ะะตััะพะฒ                โ        โ
โ โโโโ +7 912 345-67-89                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ะฆะฒะตัะพะฒะฐั ััะตะผะฐ

### ะะพะดะฐะปัะฝะพะต ะพะบะฝะพ:
- **ะคะพะฝ overlay**: `rgba(0, 0, 0, 0.5)`
- **ะคะพะฝ ะผะพะดะฐะปัะฝะพะณะพ**: `white`
- **ะขะตะฝั**: `shadow-xl`
- **ะัะฐะฝะธัะฐ**: `border-gray-200`

### ะะฒะฐัะฐัั ะฟะพะปัะทะพะฒะฐัะตะปะตะน:
- **ะัะฐะดะธะตะฝั**: `from-purple-500 to-pink-500`
- **ะขะตะบัั**: `white`
- **ะะฐะทะผะตั**: `40x40px`

### ะะฝะพะฟะบะฐ ัะพะทะดะฐัั ัะฐั:
- **ะฆะฒะตั**: `text-blue-600`
- **Hover**: `bg-blue-50`
- **ะะฐะทะผะตั ะธะบะพะฝะบะธ**: `24x24px`

---

## ะัะธะผะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั

### ะัะบัััะธะต ะผะพะดะฐะปัะฝะพะณะพ ะพะบะฝะฐ
```typescript
function openCreateDialog() {
  isCreateDialogOpen.value = true
}
```

### ะกะพะทะดะฐะฝะธะต ะดะธะฐะปะพะณะฐ
```typescript
async function handleUserSelected(user: any) {
  const response = await api.createDialog({
    name: `ะะธะฐะปะพะณ ั ${user.name}`,
    memberIds: [user.userId]
  })
  
  // Refresh and open
  await dialogsStore.fetchDialogs()
  await selectDialog(response.data.dialogId)
}
```

### ะะพะธัะบ ะฟะพะปัะทะพะฒะฐัะตะปะตะน
```typescript
const response = await api.getUsers({ 
  search: 'ะะฝะฝะฐ', 
  limit: 50 
})
```

---

## ะกะบัะธะฝัะพัั

### 1. ะะฝะพะฟะบะฐ "ะกะพะทะดะฐัั ัะฐั"
`dialog-created-success.png` - ะะฝะพะฟะบะฐ ะฒ ะทะฐะณะพะปะพะฒะบะต ัะฐะทะดะตะปะฐ

### 2. ะะพะดะฐะปัะฝะพะต ะพะบะฝะพ
`create-dialog-modal-open.png` - ะกะฟะธัะพะบ ะฟะพะปัะทะพะฒะฐัะตะปะตะน

### 3. ะกะพะทะดะฐะฝะฝัะน ะดะธะฐะปะพะณ
`dialog-created-success.png` - ะะธะฐะปะพะณ ะฟะพัะฒะธะปัั ะฒ ัะฟะธัะบะต

### 4. ะัะบััััะน ะดะธะฐะปะพะณ
`dialog-opened-ready-to-chat.png` - ะะพัะพะฒ ะบ ะพะฑัะตะฝะธั

---

## ะะพะทะผะพะถะฝัะต ัะปัััะตะฝะธั

### ะัะฐัะบะพััะพัะฝัะต:
- [ ] ะะพะฑะฐะฒะธัั ะฟัะตะดะฟัะพัะผะพัั ะฐะฒะฐัะฐัะพะฒ ะฟะพะปัะทะพะฒะฐัะตะปะตะน (ะตัะปะธ ะตััั)
- [ ] ะะพะบะฐะทะฐัั ััะฐััั ะพะฝะปะฐะนะฝ/ะพััะปะฐะนะฝ
- [ ] ะะพะฑะฐะฒะธัั ัะธะปััั ะฟะพ ะพะฝะปะฐะนะฝ ะฟะพะปัะทะพะฒะฐัะตะปัะผ
- [ ] ะะพะบะฐะทะฐัั ะบะพะณะดะฐ ะฟะพะปัะทะพะฒะฐัะตะปั ะฑัะป ะพะฝะปะฐะนะฝ ะฟะพัะปะตะดะฝะธะน ัะฐะท

### ะะพะปะณะพััะพัะฝัะต:
- [ ] ะััะฟะฟะพะฒัะต ะดะธะฐะปะพะณะธ (ะฒัะฑะพั ะฝะตัะบะพะปัะบะธั ะฟะพะปัะทะพะฒะฐัะตะปะตะน)
- [ ] ะะฐัะตะณะพัะธะธ ะฟะพะปัะทะพะฒะฐัะตะปะตะน (ะดััะทัั, ะบะพะปะปะตะณะธ, ะธ ั.ะด.)
- [ ] ะััะพัะธั ะฝะตะดะฐะฒะฝะธั ะบะพะฝัะฐะบัะพะฒ
- [ ] QR-ะบะพะด ะดะปั ะฑััััะพะณะพ ะดะพะฑะฐะฒะปะตะฝะธั ะบะพะฝัะฐะบัะฐ
- [ ] ะัะธะณะปะฐัะธัะตะปัะฝัะต ัััะปะบะธ

---

## ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั

### ะะฟัะธะผะธะทะฐัะธะธ:
- โ Debounce ะฟะพะธัะบะฐ (300ms) - ัะฝะธะถะตะฝะธะต ะฝะฐะณััะทะบะธ ะฝะฐ API
- โ Limit 50 ะฟะพะปัะทะพะฒะฐัะตะปะตะน - ะฑััััะฐั ะทะฐะณััะทะบะฐ
- โ Exclude current user - ะผะตะฝััะต ะดะฐะฝะฝัั
- โ Sort by lastActiveAt - ัะตะปะตะฒะฐะฝัะฝัะต ะฟะพะปัะทะพะฒะฐัะตะปะธ ัะฒะตััั

### ะะตััะธะบะธ:
- **ะะฐะณััะทะบะฐ ะฟะพะปัะทะพะฒะฐัะตะปะตะน**: ~100-200ms
- **ะกะพะทะดะฐะฝะธะต ะดะธะฐะปะพะณะฐ**: ~200-300ms
- **ะะฑัะตะต ะฒัะตะผั**: <1 ัะตะบัะฝะดั

---

## ะะตะทะพะฟะฐัะฝะพััั

### ะะตะฐะปะธะทะพะฒะฐะฝะพ:
- โ ะััะตะฝัะธัะธะบะฐัะธั (middleware `authenticate`)
- โ ะัะบะปััะตะฝะธะต ัะตะบััะตะณะพ ะฟะพะปัะทะพะฒะฐัะตะปั ะธะท ัะฟะธัะบะฐ
- โ ะัะพะฒะตัะบะฐ ะฟัะฐะฒ ะฝะฐ ัะพะทะดะฐะฝะธะต ะดะธะฐะปะพะณะฐ
- โ ะะฐะปะธะดะฐัะธั ะดะฐะฝะฝัั ะฝะฐ backend

### ะะตะบะพะผะตะฝะดะฐัะธะธ:
- โ๏ธ ะะพะฑะฐะฒะธัั rate limiting ะดะปั API /users
- โ๏ธ ะะณัะฐะฝะธัะธัั ะบะพะปะธัะตััะฒะพ ัะพะทะดะฐะฒะฐะตะผัั ะดะธะฐะปะพะณะพะฒ ะฒ ะดะตะฝั
- โ๏ธ ะะพะฑะฐะฒะธัั ะฑะปะพะบะธัะพะฒะบั ัะฟะฐะผะฐ

---

## ะะฐะบะปััะตะฝะธะต

ะคัะฝะบัะธั ัะพะทะดะฐะฝะธั ะดะธะฐะปะพะณะพะฒ ััะฟะตัะฝะพ ัะตะฐะปะธะทะพะฒะฐะฝะฐ ะธ ะฟัะพัะตััะธัะพะฒะฐะฝะฐ. ะะพะปัะทะพะฒะฐัะตะปะธ ัะตะฟะตัั ะผะพะณัั:
- โ ะัะพัะผะฐััะธะฒะฐัั ัะฟะธัะพะบ ะฒัะตั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
- โ ะัะบะฐัั ะฟะพะปัะทะพะฒะฐัะตะปะตะน ะฟะพ ะธะผะตะฝะธ ะธะปะธ ัะตะปะตัะพะฝั
- โ ะกะพะทะดะฐะฒะฐัั ะฝะพะฒัะต ะดะธะฐะปะพะณะธ ะฒ ะพะดะธะฝ ะบะปะธะบ
- โ ะะฒัะพะผะฐัะธัะตัะบะธ ะฝะฐัะธะฝะฐัั ะพะฑัะตะฝะธะต

### ะกัะฐััั:
๐ **ะะะะะะกะขะฌะฎ ะะะขะะะ ะ ะะกะะะะฌะะะะะะะฎ**

---

**ะะฐะทัะฐะฑะพัะฐะฝะพ**: 05.11.2025  
**ะัะตะผั ัะฐะทัะฐะฑะพัะบะธ**: ~30 ะผะธะฝัั  
**ะคะฐะนะปะพะฒ ัะพะทะดะฐะฝะพ**: 5  
**ะคะฐะนะปะพะฒ ะธะทะผะตะฝะตะฝะพ**: 3  
**ะกััะพะบ ะบะพะดะฐ**: ~400

