# Требования к фронтенду

## 1. Диалоги

### 1.1. Типы диалогов

Есть три типа диалогов:
- **p2p** - диалог между двумя участниками
- **group** - групповой диалог
- **personal_contact** - диалог с бизнес-контактом (может содержать дополнительных участников)

### 1.2. Типы участников

Есть три типа участников:
- **user** - обычный пользователь
- **bot** - бот
- **contact** - бизнес-контакт (определяется по `type: 'contact'` у участника)

### 1.3 Типы групп

Группы (тип диалога group) могут публичные (groupType=public) и приватные (groupType=private)

## 2. Лента сообщений

### 2.1. Правила отображения сообщений

| Тип диалога | Отправитель сообщения | Расположение | Примечание |
|------------|----------------------|--------------|------------|
| **p2p** | Активный пользователь | Справа | Диалог между 2 участниками (user-user или user-bot) |
| **p2p** | Собеседник | Слева | Второй участник диалога |
| **group** | Активный пользователь | Справа | Групповой диалог с несколькими участниками |
| **group** | Другой участник (user или bot) | Слева | Любой участник кроме активного пользователя |
| **personal_contact** | Активный пользователь | Справа | Диалог с бизнес-контактом |
| **personal_contact** | Бизнес-контакт (`type: 'contact'`) | Слева | Обязательный участник-собеседник |
| **personal_contact** | Коллега (user или bot) | Справа | Дополнительные участники, кроме активного пользователя и бизнес-контакта |

### 2.2. Детали по типам диалогов

**p2p:**
- Участники: 2 участника (активный пользователь + собеседник)
- Варианты: user-user, user-bot

**group:**
- Участники: несколько участников (активный пользователь + другие участники)
- Состав: может содержать несколько user и несколько bot

**personal_contact:**
- Участники: активный пользователь + бизнес-контакт (обязательно) + коллеги (опционально)
- Состав: обязательно содержит бизнес-контакт (участник с `type: 'contact'`), может содержать дополнительные user и bot (коллеги)


## 3. Список диалогов

Список диалогов в frontend содержит 3 части: заголовок ("Чаты" + контекстное меню действий), фильтр (текстовое полле ввода и набор беджей), сам список диалогов (диалоги всех типов)

### 3.1 Работа фильтра

Фильтр состоит из двух частей:
1. **Текстовое поле поиска** - поиск по диалогам
2. **Набор фильтров-беджей** - фильтрация по типу диалога

#### 3.1.1. Текстовый поиск

- **Активация**: поиск активируется при вводе >= 2 символов
- **Debounce**: задержка 300ms перед выполнением запроса
- **Очистка**: кнопка очистки появляется при наличии текста
- **Режим**: при активном поиске отображаются только результаты поиска, обычный список скрывается

#### 3.1.2. Фильтры-беджи

Доступные фильтры:

| Фильтр | Значение | Описание |
|--------|----------|----------|
| **Все** | `all` | Показать все диалоги (по умолчанию) |
| **Личные** | `p2p` | Только p2p диалоги (user-user, user-bot) |
| **Бизнес контакты** | `business-contacts` | Только диалоги типа personal_contact |
| **Приватные группы** | `group:private` | Только приватные группы (groupType=private) |
| **Публичные группы** | `group:public` | Только публичные группы (groupType=public) |
| **Мои избранные** | `favorites` | Только диалоги, помеченные как избранные |
| **Непрочитанные** | `unread` | Только диалоги с непрочитанными сообщениями (unreadCount > 0) |

#### 3.1.3. Взаимодействие поиска и фильтров

- **Поиск + фильтр**: при активном поиске фильтр применяется к результатам поиска
- **Сброс фильтра**: клик по активному фильтру сбрасывает его на "Все"
- **Смена фильтра**: при смене фильтра список диалогов перезагружается с первой страницы
- **Сохранение поиска**: при смене фильтра текст поиска сохраняется и применяется к новому фильтру

#### 3.1.4. Поведение при фильтрации

- При применении фильтра список диалогов перезагружается с сервера
- Фильтр передается в API как параметр `type`
- При фильтре `all` параметр `type` не передается
- Фильтр сохраняет состояние и ui применяет состояние фильтра при пагинации
