# Chat Application

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–∞—Ç–∞ —Å –±—ç–∫–µ–Ω–¥–æ–º –∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º.

> üöÄ **–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç:** [QUICK_START.md](QUICK_START.md)  
> üìä **–û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞:** [PROJECT_SUMMARY.md](PROJECT_SUMMARY.md)  
> üìê **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md)

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### Backend
- üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ SMS (–Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ + 4-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥)
- üîë JWT —Ç–æ–∫–µ–Ω—ã —Å —Å–µ—Å—Å–∏–µ–π 48 —á–∞—Å–æ–≤
- üÜî –ö–∞—Å—Ç–æ–º–Ω—ã–µ userId –≤ —Ñ–æ—Ä–º–∞—Ç–µ `usr_XXXXXXXX`
- üí¨ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Chat3 API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞–º–∏ –∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- üîå WebSocket –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- üì¨ RabbitMQ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –∏–∑ Chat3
- üì± REST API –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- üíæ MongoDB –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üë• API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### Frontend
- ‚ö° Vue 3 —Å Composition API
- üìò TypeScript –¥–ª—è —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- üé® Tailwind CSS –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ UI
- üè™ Pinia –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- üîå Socket.io –∫–ª–∏–µ–Ω—Ç –¥–ª—è real-time
- üéØ Vue Router –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- ü™ü –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö —Å–µ—Å—Å–∏–π –≤ —Ä–∞–∑–Ω—ã—Ö –≤–∫–ª–∞–¥–∫–∞—Ö
- üë§ –ö–∞—Ä—Ç–æ—á–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∞–≤–∞—Ç–∞—Ä–æ–º –∏ –æ–Ω–ª–∞–π–Ω-—Å—Ç–∞—Ç—É—Å–æ–º
- ‚ûï –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏–∞–ª–æ–≥–æ–≤ —Å –≤—ã–±–æ—Ä–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ —Å–ø–∏—Å–∫–∞
- üîë –†–∞–∑–¥–µ–ª—å–Ω—ã–µ —Ñ–æ—Ä–º—ã –≤—Ö–æ–¥–∞ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- ‚ÑπÔ∏è –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–µ

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
chatpapp/
‚îú‚îÄ‚îÄ backend/                      # Node.js + Express + Socket.io
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config/              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models/              # MongoDB –º–æ–¥–µ–ª–∏ (User)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/            # Chat3Client, AuthService, SMSService, RabbitMQService
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes/              # API endpoints
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ middleware/          # Auth middleware
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ websocket/           # WebSocket —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ server.js                # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îÇ
‚îú‚îÄ‚îÄ frontend/                     # Vue 3 + TypeScript + Vite
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/          # Vue –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ views/               # –°—Ç—Ä–∞–Ω–∏—Ü—ã (LoginView, ChatView)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ stores/              # Pinia stores (auth, dialogs, messages)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/            # API –∏ WebSocket services
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ types/               # TypeScript —Ç–∏–ø—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ router/              # Vue Router
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ App.vue              # –ì–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ main.ts              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ index.html
‚îÇ   ‚îú‚îÄ‚îÄ vite.config.ts
‚îÇ   ‚îú‚îÄ‚îÄ tailwind.config.js
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îÇ
‚îî‚îÄ‚îÄ docs/                        # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
    ‚îú‚îÄ‚îÄ ARCHITECTURE.md          # –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å –¥–∏–∞–≥—Ä–∞–º–º–∞–º–∏
    ‚îî‚îÄ‚îÄ chat3/
        ‚îî‚îÄ‚îÄ UPDATES.md           # –°–∏—Å—Ç–µ–º–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π Chat3
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Node.js 18+
- MongoDB
- RabbitMQ (–¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –∏–∑ Chat3)
- Chat3 API (–∑–∞–ø—É—â–µ–Ω –Ω–∞ http://localhost:3002)

### Backend

1. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
```bash
cd backend
npm install
```

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env:**
```bash
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª, –¥–æ–±–∞–≤—å—Ç–µ CHAT3_API_KEY
```

3. **–ó–∞–ø—É—Å–∫:**
```bash
# Development —Ä–µ–∂–∏–º —Å hot-reload
npm run dev

# Production —Ä–µ–∂–∏–º
npm start
```

Backend –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:3001`

### Frontend

1. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
```bash
cd frontend
npm install
```

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env:**
```bash
cp .env.example .env
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ backend URL –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
```

3. **–ó–∞–ø—É—Å–∫:**
```bash
# Development —Ä–µ–∂–∏–º —Å hot-reload
npm run dev

# Production —Å–±–æ—Ä–∫–∞
npm run build
```

Frontend –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:5173`

## API Documentation

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

**1. –ó–∞–ø—Ä–æ—Å–∏—Ç—å –∫–æ–¥:**
```bash
POST /api/auth/request-code
{
  "phone": "79123456789",
  "name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤"  # –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
}
```

**2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥:**
```bash
POST /api/auth/verify-code
{
  "phone": "79123456789",
  "code": "1234"
}
# –í–µ—Ä–Ω—ë—Ç JWT token
```

**3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å token:**
```bash
GET /api/dialogs
Headers: Authorization: Bearer <token>
```

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API: [backend/README.md](backend/README.md)

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

### Backend
- **Express** - –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **Socket.io** - WebSocket —Å–µ—Ä–≤–µ—Ä
- **MongoDB + Mongoose** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **JWT** - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- **Axios** - HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è Chat3 API

### Frontend
- **Vue 3** - –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **TypeScript** - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- **Vite** - –±—ã—Å—Ç—Ä–∞—è —Å–±–æ—Ä–∫–∞ –∏ HMR
- **Pinia** - state management
- **Vue Router** - –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è
- **Tailwind CSS** - utility-first CSS
- **Socket.io Client** - WebSocket
- **Axios** - HTTP –∫–ª–∏–µ–Ω—Ç

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### SMS –≤ dev —Ä–µ–∂–∏–º–µ
–ö–æ–¥—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å:
```
üì± [SMS MOCK] Sending code to 79123456789
üîê Verification code: 1234
```

### Chat3 Integration
Backend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Chat3 API –¥–ª—è:
- –°–æ–∑–¥–∞–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞–º–∏
- –û—Ç–ø—Ä–∞–≤–∫–∏ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏
- –†–µ–∞–∫—Ü–∏–π –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
- –°—Ç–∞—Ç—É—Å–æ–≤ –ø—Ä–æ—á—Ç–µ–Ω–∏—è

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### üìñ –û—Å–Ω–æ–≤–Ω–∞—è
- üìä **[–û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞](PROJECT_SUMMARY.md)** - –ø–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- üöÄ **[–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](QUICK_START.md)** - –ø–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∑–∞–ø—É—Å–∫—É
- üìê **[–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](docs/ARCHITECTURE.md)** - –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å 11 Mermaid –¥–∏–∞–≥—Ä–∞–º–º–∞–º–∏
- üìö [–ò–Ω–¥–µ–∫—Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](DOCUMENTATION_INDEX.md) - –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –≤—Å–µ–º –¥–æ–∫—É–º–µ–Ω—Ç–∞–º
- üìÅ [–°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤](FILES.md) - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –≤—Å–µ —Ñ–∞–π–ª—ã

### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è
- üîå [WebSocket API](backend/WEBSOCKET.md) - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è WebSocket —Å–æ–±—ã—Ç–∏–π
- üì¨ [RabbitMQ Integration](backend/docs/RABBITMQ_INTEGRATION.md) - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Chat3 —á–µ—Ä–µ–∑ RabbitMQ
- üîÑ [Migration Guide](backend/MIGRATION.md) - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- ü™ü [Multi-Tab Sessions](docs/MULTI_TAB_SESSIONS.md) - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö —Å–µ—Å—Å–∏–π –≤ —Ä–∞–∑–Ω—ã—Ö –≤–∫–ª–∞–¥–∫–∞—Ö
- üë§ [User Info Display](docs/USER_INFO_DISPLAY.md) - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
- ‚ûï [Create Dialog Feature](docs/CREATE_DIALOG_FEATURE.md) - —Å–æ–∑–¥–∞–Ω–∏–µ –¥–∏–∞–ª–æ–≥–æ–≤ —Å –≤—ã–±–æ—Ä–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- üîë [Separate Login/Register](docs/SEPARATE_LOGIN_REGISTER.md) - —Ä–∞–∑–¥–µ–ª—å–Ω—ã–µ —Ñ–æ—Ä–º—ã –≤—Ö–æ–¥–∞ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- üë• [Test Users](docs/TEST_USERS_AND_DIALOG_UPDATES.md) - —Ç–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- üí¨ [Message Sending Fix](docs/MESSAGE_SENDING_FIX.md) - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚ÑπÔ∏è [User Info Modal](docs/USER_INFO_MODAL_FEATURE.md) - –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–µ
- ‚ö° [Real-time Fix](docs/REALTIME_FIX.md) - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —Å–æ–æ–±—â–µ–Ω–∏–π
- üìã [Changelog](backend/CHANGELOG.md) - –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

## –°–∫—Ä–∏–Ω—à–æ—Ç—ã

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- –í–≤–æ–¥ –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- –í–≤–æ–¥ –∫–æ–¥–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- –°–ø–∏—Å–æ–∫ –¥–∏–∞–ª–æ–≥–æ–≤ —Å –ø–æ—Å–ª–µ–¥–Ω–∏–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- –°—á–µ—Ç—á–∏–∫–∏ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö
- –û–∫–Ω–æ —á–∞—Ç–∞ —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã "–ø–µ—á–∞—Ç–∞–µ—Ç..."

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

- [x] ‚úÖ –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (Vue 3)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ SMS —Å–µ—Ä–≤–∏—Å–∞
- [ ] –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –∏ –º–µ–¥–∏–∞
- [ ] Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- [ ] –ü–æ–∏—Å–∫ –ø–æ —Å–æ–æ–±—â–µ–Ω–∏—è–º
- [ ] –ì—Ä—É–ø–ø—ã –∏ –∫–∞–Ω–∞–ª—ã
- [ ] –¢–µ–º–Ω–∞—è —Ç–µ–º–∞
- [ ] –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

## –õ–∏—Ü–µ–Ω–∑–∏—è

ISC

